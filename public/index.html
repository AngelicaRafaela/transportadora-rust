<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bunny Fonts (ex.: Inter + Poppins) -->
  <link rel="preconnect" href="https://fonts.bunny.net">
  <link href="https://fonts.bunny.net/css?family=inter:400,600,700|poppins:400,600" rel="stylesheet"> <!-- :contentReference[oaicite:7]{index=7} -->

  <!-- Tailwind Play CDN (rápido p/ protótipo) -->
  <script src="https://cdn.tailwindcss.com"></script> <!-- :contentReference[oaicite:8]{index=8} -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            /* cole seus HEX da ColorHunt aqui */
            primary: '#222831',
            secondary: '#FFD369',
            accent: '#00ADB5',
            light: '#EEEEEE',
          },
          fontFamily: {
            sans: ['Inter', 'ui-sans-serif', 'system-ui'],
            display: ['Poppins', 'ui-sans-serif', 'system-ui'],
          }
        }
      }
    }
  </script>

  <!-- TailGrids (CDN fallback de estilos básicos) -->
  <link rel="stylesheet" href="https://cdn.tailgrids.com/tailgrids-fallback.css"> <!-- :contentReference[oaicite:9]{index=9} -->

  <!-- Tabler Icons (webfont) -->
  <link rel="stylesheet" href="https://unpkg.com/@tabler/icons-webfont@latest/tabler-icons.min.css"> <!-- :contentReference[oaicite:10]{index=10} -->

  <title>Transportadora - Dashboard</title>

  <style>
    /* Exemplo Animista: copie o CSS gerado lá e cole aqui p/ animações custom. :contentReference[oaicite:11]{index=11} */
  </style>
</head>
<body class="bg-light text-primary font-sans">
  <header class="p-4 shadow-sm bg-white sticky top-0 z-10">
    <div class="max-w-7xl mx-auto flex items-center gap-3">
      <i class="ti ti-truck-delivery text-3xl"></i>
      <h1 class="font-display text-2xl">Painel da Transportadora</h1>
    </div>
  </header>

  <main class="max-w-7xl mx-auto p-4 space-y-6">
    <!-- KPIs -->
    <section class="grid md:grid-cols-4 gap-4">
      <div class="rounded-2xl p-4 bg-white shadow-sm">
        <div class="flex items-center gap-3">
          <i class="ti ti-road text-2xl"></i>
          <div>
            <p class="text-sm text-gray-500">Viagens</p>
            <p id="kpi-viagens" class="text-2xl font-semibold">—</p>
          </div>
        </div>
      </div>
      <div class="rounded-2xl p-4 bg-white shadow-sm">
        <div class="flex items-center gap-3">
          <i class="ti ti-steering-wheel text-2xl"></i>
          <div>
            <p class="text-sm text-gray-500">Motoristas</p>
            <p id="kpi-motoristas" class="text-2xl font-semibold">—</p>
          </div>
        </div>
      </div>
      <div class="rounded-2xl p-4 bg-white shadow-sm">
        <div class="flex items-center gap-3">
          <i class="ti ti-truck text-2xl"></i>
          <div>
            <p class="text-sm text-gray-500">Caminhões</p>
            <p id="kpi-caminhoes" class="text-2xl font-semibold">—</p>
          </div>
        </div>
      </div>
      <div class="rounded-2xl p-4 bg-white shadow-sm">
        <div class="flex items-center gap-3">
          <i class="ti ti-building-warehouse text-2xl"></i>
          <div>
            <p class="text-sm text-gray-500">Clientes</p>
            <p id="kpi-clientes" class="text-2xl font-semibold">—</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Lista de Viagens -->
    <section class="rounded-2xl p-4 bg-white shadow-sm">
      <div class="flex items-center justify-between mb-4">
        <h2 class="font-display text-xl">Viagens recentes</h2>
        <button id="nova-viagem" class="px-4 py-2 rounded-xl bg-accent text-white">Nova Viagem</button>
      </div>
      <div id="lista-viagens" class="divide-y"></div>
    </section>

    <!-- Banner com imagem (use fotos do Pexels) -->
    <section class="rounded-2xl overflow-hidden shadow-sm">
      <img src="https://images.pexels.com/photos/93398/pexels-photo-93398.jpeg?auto=compress&cs=tinysrgb&w=1600"
           alt="Caminhão na estrada" class="w-full h-64 object-cover"> <!-- Pexels é free-to-use, ver licença. -->
    </section>
  </main>

  <footer class="max-w-7xl mx-auto p-4 text-sm text-gray-500">
    Ilustrações: <a class="underline" href="https://drawkit.com">DrawKit</a> · Fotos: <a class="underline" href="https://pexels.com">Pexels</a>
  </footer>

  <script>
    // Fetch KPIs e lista de viagens
    async function carregar() {
      // KPIs: simplesmente contam itens (ajuste quando criar endpoints próprios)
      const [viagens] = await Promise.all([
        fetch('/api/viagens').then(r => r.json()).catch(() => []),
      ]);
      document.getElementById('kpi-viagens').textContent   = viagens.length ?? 0;

      // placeholders até criar endpoints /api/motoristas, /api/caminhoes, /api/clientes
      document.getElementById('kpi-motoristas').textContent = '—';
      document.getElementById('kpi-caminhoes').textContent  = '—';
      document.getElementById('kpi-clientes').textContent   = '—';

      const wrap = document.getElementById('lista-viagens');
      wrap.innerHTML = "";
      viagens.forEach(v => {
        const row = document.createElement('div');
        row.className = "py-3 flex items-center justify-between";
        row.innerHTML = `
          <div>
            <p class="font-medium">${v.origem_cidade} → ${v.destino_cidade}</p>
            <p class="text-sm text-gray-500">${v.status} • ${v.valor_frete ? 'R$ ' + v.valor_frete.toFixed(2) : 'sem valor'}</p>
          </div>
          <span class="text-xs rounded-full px-2 py-1 bg-secondary/30">${v.id.substring(0,8)}</span>
        `;
        wrap.appendChild(row);
      });
    }
    carregar();
  </script>
</body>
</html>
